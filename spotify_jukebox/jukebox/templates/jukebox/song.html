{% if title %}
<span id="player-data" style="display:none;"
      data-playing="{{ is_playing|lower }}"
      data-image="{{ image_url }}"
      data-progress="{{ progress_percent }}"
      data-time="{{ display_time }}"
      data-duration="{{ display_duration }}"></span>

<div class="song-info">
    <h3 class="text-white h5 mb-1 fw-bold">{{ title }}</h3>
    <p class="text-secondary small mb-4">{{ artist }}</p>

    <div class="player-controls d-flex justify-content-center align-items-center gap-4">

        {% if is_host or guest_can_pause %}
            <button class="btn btn-link text-white p-0 control-btn" hx-post="/api/prev-song/" hx-swap="none">
                <i class="bi bi-skip-backward-fill fs-2"></i>
            </button>

            {% if is_playing %}
            <button class="btn btn-link text-white p-0 control-btn" hx-post="/api/pause-song/" hx-swap="none">
                <i class="bi bi-pause-circle-fill" style="font-size: 4rem;"></i>
            </button>
            {% else %}
            <button class="btn btn-link text-white p-0 control-btn" hx-post="/api/play-song/" hx-swap="none">
                <i class="bi bi-play-circle-fill" style="font-size: 4rem;"></i>
            </button>
            {% endif %}

            <button class="btn btn-link text-white p-0 control-btn" hx-post="/api/skip-song/" hx-swap="none">
                <i class="bi bi-skip-forward-fill fs-2"></i>
            </button>

        {% else %}
            <div class="voting-container w-100 px-4">
                <button class="btn btn-outline-info w-100 py-3 rounded-pill mb-2 control-btn"
                        hx-post="/api/vote-to-skip/"
                        hx-swap="none">
                    <i class="bi bi-megaphone-fill me-2"></i> Vote to Skip
                </button>

                <div class="d-flex justify-content-between small text-secondary px-2">
                    <span>Votes received:</span>
                    <span class="text-white fw-bold">{{ votes }} / {{ votes_required }}</span>
                </div>
                <div class="progress bg-dark mt-1" style="height: 6px; border-radius: 3px;">
                    <div class="progress-bar bg-info"
                         style="width: {{ vote_percentage|default:0 }}%; transition: width 0.5s;">
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</div>
{% else %}
<div class="p-4 text-secondary">{{ error_message|default:"Spotify is idle..." }}</div>
{% endif %}